<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="NOTICE" >
  <resultMap id="BaseResultMap" type="com.icss.oa.notice.pojo.Notice" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 20 08:46:51 CST 2015.
    -->
    <id column="NOTICE_ID" property="noticeId" jdbcType="DECIMAL" />
    <result column="TIME" property="time" jdbcType="DATE" />
    <result column="EMP_ID" property="empId" jdbcType="DECIMAL" />
    <result column="IS_TOP" property="isTop" jdbcType="DECIMAL" />
    <result column="NOTICE_TITLE" property="noticeTitle" jdbcType="VARCHAR" />
    <result column="CONTENT" property="content" jdbcType="VARCHAR" />
  </resultMap>

  <delete id="delete" parameterType="java.lang.Integer" >
    delete from NOTICE
    where NOTICE_ID = #{noticeId,jdbcType=DECIMAL}
  </delete>

  <insert id="insert" parameterType="com.icss.oa.notice.pojo.Notice" >
    insert into NOTICE (NOTICE_ID, TIME, IS_TOP, NOTICE_TITLE, CONTENT
      )
    values (Notice_seq.nextval, #{time,jdbcType=DATE},
      #{isTop,jdbcType=DECIMAL}, #{noticeTitle,jdbcType=VARCHAR}, #{content,jdbcType=VARCHAR}
      )
  </insert>

  <update id="update" parameterType="com.icss.oa.notice.pojo.Notice" >
    update NOTICE
    set TIME = #{time,jdbcType=DATE},
      IS_TOP = #{isTop,jdbcType=DECIMAL},
      NOTICE_TITLE = #{noticeTitle,jdbcType=VARCHAR},
      CONTENT = #{content,jdbcType=VARCHAR}
    where NOTICE_ID = #{noticeId,jdbcType=DECIMAL}
  </update>
  
  	<!-- 查询全部-->
	<select id="queryAll" parameterType="java.util.Map"
		resultMap="BaseResultMap">   
		select * from NOTICE order by IS_TOP desc,TIME desc
	</select>
	
	<select id="queryTop" parameterType="java.util.Map"
		resultMap="BaseResultMap">   
		select * from NOTICE where IS_TOP=1 order by TIME desc
	</select>
	
	<select id="queryNotTop" parameterType="java.util.Map"
		resultMap="BaseResultMap">   
		select * from NOTICE where IS_TOP=0 order by TIME desc
	</select>
	
	<select id="queryById" parameterType="java.lang.Integer" resultMap="BaseResultMap">
		select * from NOTICE
		where 
		NOTICE_ID=#{noticeId,jdbcType=DECIMAL} 
	</select>
	
	<select id="getCount" resultType="java.lang.Integer">
		select count(*) from NOTICE
	</select>
	
	<select id="countAll" resultType="java.lang.Integer">
		select count(*) from notice
	</select>
	
		<!-- 分页查询并生序排列 -->
	<select id="queryByPager" parameterType="java.util.Map"
		resultMap="BaseResultMap">   
		select * from (select rownum rnum,s.* from (select * from NOTICE order by IS_TOP desc,NOTICE_ID desc) s)
		where
		rnum between #{start} and #{end}
	</select>
	<select id="queryAllWithTop" resultMap="BaseResultMap"
		parameterType="java.util.Map">
		select * from (select r.*,rownum rnum from (select *
		from notice order by is_top desc,time desc) r ) where rnum between
		#{start} and
		#{end}
	</select>
</mapper>